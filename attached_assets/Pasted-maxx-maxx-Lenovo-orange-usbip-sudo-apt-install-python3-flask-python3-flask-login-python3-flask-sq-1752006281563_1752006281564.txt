maxx@maxx-Lenovo:~/orange-usbip$ sudo apt install python3-flask python3-flask-login python3-flask-sqlalchemy python3-werkzeug python3-email-validator python3-requests python3-gunicorn
Reading package lists... Done
Building dependency tree... Done
Reading state information... Done
python3-requests is already the newest version (2.31.0+dfsg-1ubuntu1.1).
python3-requests set to manually installed.
The following packages were automatically installed and are no longer required:
  colcon libavahi-gobject0 libavahi-ui-gtk3-0 libconfig9 libfreerdp2-2t64
  libgtk-vnc-2.0-0 libgvnc-1.0-0 libmicrohttpd12t64 libphodav-3.0-0
  libphodav-3.0-common libspice-client-glib-2.0-8 libspice-client-gtk-3.0-5
  libtgl-0.0.0.20160623-0t64 libusbredirhost1t64 libwinpr2-2t64 libxcomp3t64
  nxproxy python3-netifaces rdesktop ros-jazzy-shared-queues-vendor
  spice-client-glib-usb-acl-helper vinagre
Use 'sudo apt autoremove' to remove them.
The following additional packages will be installed:
  python3-asgiref python3-greenlet python3-itsdangerous python3-openssl
  python3-pyasyncore python3-pyinotify python3-simplejson python3-sqlalchemy
  python3-sqlalchemy-ext
Suggested packages:
  python3-dotenv python-flask-doc python-flask-login-doc python-greenlet-dev
  python-greenlet-doc python-openssl-doc python3-openssl-dbg
  python-pyinotify-doc python-sqlalchemy-doc python3-fdb python3-pymssql
  python3-mysqldb python3-psycopg2 python3-asyncpg python3-aiosqlite ipython3
  python-werkzeug-doc python3-watchdog
The following NEW packages will be installed:
  python3-asgiref python3-email-validator python3-flask python3-flask-login
  python3-flask-sqlalchemy python3-greenlet python3-gunicorn
  python3-itsdangerous python3-openssl python3-pyasyncore python3-pyinotify
  python3-simplejson python3-sqlalchemy python3-sqlalchemy-ext
  python3-werkzeug
0 upgraded, 15 newly installed, 0 to remove and 210 not upgraded.
Need to get 1,751 kB of archives.
After this operation, 9,949 kB of additional disk space will be used.
Do you want to continue? [Y/n] y
Get:1 http://ca.archive.ubuntu.com/ubuntu noble/main amd64 python3-asgiref all 3.7.2-1 [24.8 kB]
Get:2 http://ca.archive.ubuntu.com/ubuntu noble/universe amd64 python3-email-validator all 1.3.0-1 [20.0 kB]
Get:3 http://ca.archive.ubuntu.com/ubuntu noble/main amd64 python3-itsdangerous all 2.1.2-4 [14.6 kB]
Get:4 http://ca.archive.ubuntu.com/ubuntu noble-updates/main amd64 python3-werkzeug all 3.0.1-3ubuntu0.2 [170 kB]
Get:5 http://ca.archive.ubuntu.com/ubuntu noble/main amd64 python3-flask all 3.0.2-1ubuntu1 [82.9 kB]
Get:6 http://ca.archive.ubuntu.com/ubuntu noble/universe amd64 python3-flask-login all 0.6.3-1ubuntu1 [19.9 kB]
Get:7 http://ca.archive.ubuntu.com/ubuntu noble-updates/main amd64 python3-greenlet amd64 3.0.3-0ubuntu5.1 [154 kB]
Get:8 http://ca.archive.ubuntu.com/ubuntu noble/main amd64 python3-sqlalchemy all 1.4.50+ds1-1build1 [1,020 kB]
Get:9 http://ca.archive.ubuntu.com/ubuntu noble/universe amd64 python3-flask-sqlalchemy all 3.0.3-1 [30.9 kB]
Get:10 http://ca.archive.ubuntu.com/ubuntu noble/universe amd64 python3-gunicorn all 20.1.0-6 [58.5 kB]
Get:11 http://ca.archive.ubuntu.com/ubuntu noble/main amd64 python3-openssl all 23.2.0-1 [47.8 kB]
Get:12 http://ca.archive.ubuntu.com/ubuntu noble/main amd64 python3-pyasyncore all 1.0.2-2 [10.1 kB]
Get:13 http://ca.archive.ubuntu.com/ubuntu noble/main amd64 python3-pyinotify all 0.9.6-2ubuntu1 [25.0 kB]
Get:14 http://ca.archive.ubuntu.com/ubuntu noble/main amd64 python3-simplejson amd64 3.19.2-1build2 [54.5 kB]
Get:15 http://ca.archive.ubuntu.com/ubuntu noble/main amd64 python3-sqlalchemy-ext amd64 1.4.50+ds1-1build1 [17.3 kB]
Fetched 1,751 kB in 1s (2,305 kB/s)                 
Selecting previously unselected package python3-asgiref.
(Reading database ... 364699 files and directories currently installed.)
Preparing to unpack .../00-python3-asgiref_3.7.2-1_all.deb ...
Unpacking python3-asgiref (3.7.2-1) ...
Selecting previously unselected package python3-email-validator.
Preparing to unpack .../01-python3-email-validator_1.3.0-1_all.deb ...
Unpacking python3-email-validator (1.3.0-1) ...
Selecting previously unselected package python3-itsdangerous.
Preparing to unpack .../02-python3-itsdangerous_2.1.2-4_all.deb ...
Unpacking python3-itsdangerous (2.1.2-4) ...
Selecting previously unselected package python3-werkzeug.
Preparing to unpack .../03-python3-werkzeug_3.0.1-3ubuntu0.2_all.deb ...
Unpacking python3-werkzeug (3.0.1-3ubuntu0.2) ...
Selecting previously unselected package python3-flask.
Preparing to unpack .../04-python3-flask_3.0.2-1ubuntu1_all.deb ...
Unpacking python3-flask (3.0.2-1ubuntu1) ...
Selecting previously unselected package python3-flask-login.
Preparing to unpack .../05-python3-flask-login_0.6.3-1ubuntu1_all.deb ...
Unpacking python3-flask-login (0.6.3-1ubuntu1) ...
Selecting previously unselected package python3-greenlet.
Preparing to unpack .../06-python3-greenlet_3.0.3-0ubuntu5.1_amd64.deb ...
Unpacking python3-greenlet (3.0.3-0ubuntu5.1) ...
Selecting previously unselected package python3-sqlalchemy.
Preparing to unpack .../07-python3-sqlalchemy_1.4.50+ds1-1build1_all.deb ...
Unpacking python3-sqlalchemy (1.4.50+ds1-1build1) ...
Selecting previously unselected package python3-flask-sqlalchemy.
Preparing to unpack .../08-python3-flask-sqlalchemy_3.0.3-1_all.deb ...
Unpacking python3-flask-sqlalchemy (3.0.3-1) ...
Selecting previously unselected package python3-gunicorn.
Preparing to unpack .../09-python3-gunicorn_20.1.0-6_all.deb ...
Unpacking python3-gunicorn (20.1.0-6) ...
Selecting previously unselected package python3-openssl.
Preparing to unpack .../10-python3-openssl_23.2.0-1_all.deb ...
Unpacking python3-openssl (23.2.0-1) ...
Selecting previously unselected package python3-pyasyncore.
Preparing to unpack .../11-python3-pyasyncore_1.0.2-2_all.deb ...
Unpacking python3-pyasyncore (1.0.2-2) ...
Selecting previously unselected package python3-pyinotify.
Preparing to unpack .../12-python3-pyinotify_0.9.6-2ubuntu1_all.deb ...
Unpacking python3-pyinotify (0.9.6-2ubuntu1) ...
Selecting previously unselected package python3-simplejson.
Preparing to unpack .../13-python3-simplejson_3.19.2-1build2_amd64.deb ...
Unpacking python3-simplejson (3.19.2-1build2) ...
Selecting previously unselected package python3-sqlalchemy-ext:amd64.
Preparing to unpack .../14-python3-sqlalchemy-ext_1.4.50+ds1-1build1_amd64.deb .
..
Unpacking python3-sqlalchemy-ext:amd64 (1.4.50+ds1-1build1) ...
Setting up python3-openssl (23.2.0-1) ...
Setting up python3-itsdangerous (2.1.2-4) ...
Setting up python3-simplejson (3.19.2-1build2) ...
Setting up python3-werkzeug (3.0.1-3ubuntu0.2) ...
Setting up python3-greenlet (3.0.3-0ubuntu5.1) ...
Setting up python3-gunicorn (20.1.0-6) ...
Setting up python3-email-validator (1.3.0-1) ...
Setting up python3-pyasyncore (1.0.2-2) ...
Setting up python3-asgiref (3.7.2-1) ...
Setting up python3-flask (3.0.2-1ubuntu1) ...
Setting up python3-pyinotify (0.9.6-2ubuntu1) ...
Setting up python3-sqlalchemy (1.4.50+ds1-1build1) ...
Setting up python3-sqlalchemy-ext:amd64 (1.4.50+ds1-1build1) ...
Setting up python3-flask-sqlalchemy (3.0.3-1) ...
Setting up python3-flask-login (0.6.3-1ubuntu1) ...
maxx@maxx-Lenovo:~/orange-usbip$ sudo pip3 install --break-system-packages flask-wtf trafilatura netifaces
Collecting flask-wtf
  Downloading flask_wtf-1.2.2-py3-none-any.whl.metadata (3.4 kB)
Requirement already satisfied: trafilatura in /usr/local/lib/python3.12/dist-packages (2.0.0)
Requirement already satisfied: netifaces in /usr/lib/python3/dist-packages (0.11.0)
Requirement already satisfied: flask in /usr/lib/python3/dist-packages (from flask-wtf) (3.0.2)
Requirement already satisfied: itsdangerous in /usr/lib/python3/dist-packages (from flask-wtf) (2.1.2)
Collecting wtforms (from flask-wtf)
  Downloading wtforms-3.2.1-py3-none-any.whl.metadata (5.3 kB)
Requirement already satisfied: certifi in /usr/lib/python3/dist-packages (from trafilatura) (2023.11.17)
Requirement already satisfied: charset_normalizer>=3.4.0 in /usr/local/lib/python3.12/dist-packages (from trafilatura) (3.4.2)
Requirement already satisfied: courlan>=1.3.2 in /usr/local/lib/python3.12/dist-packages (from trafilatura) (1.3.2)
Requirement already satisfied: htmldate>=1.9.2 in /usr/local/lib/python3.12/dist-packages (from trafilatura) (1.9.3)
Requirement already satisfied: justext>=3.0.1 in /usr/local/lib/python3.12/dist-packages (from trafilatura) (3.0.2)
Requirement already satisfied: lxml>=5.3.0 in /usr/local/lib/python3.12/dist-packages (from trafilatura) (5.4.0)
Requirement already satisfied: urllib3<3,>=1.26 in /usr/lib/python3/dist-packages (from trafilatura) (2.0.7)
Requirement already satisfied: babel>=2.16.0 in /usr/local/lib/python3.12/dist-packages (from courlan>=1.3.2->trafilatura) (2.17.0)
Requirement already satisfied: tld>=0.13 in /usr/local/lib/python3.12/dist-packages (from courlan>=1.3.2->trafilatura) (0.13.1)
Requirement already satisfied: dateparser>=1.1.2 in /usr/local/lib/python3.12/dist-packages (from htmldate>=1.9.2->trafilatura) (1.2.2)
Requirement already satisfied: python-dateutil>=2.9.0.post0 in /usr/local/lib/python3.12/dist-packages (from htmldate>=1.9.2->trafilatura) (2.9.0.post0)
Requirement already satisfied: Werkzeug>=3.0.0 in /usr/lib/python3/dist-packages (from flask->flask-wtf) (3.0.1)
Requirement already satisfied: Jinja2>=3.1.2 in /usr/lib/python3/dist-packages (from flask->flask-wtf) (3.1.2)
Requirement already satisfied: click>=8.1.3 in /usr/lib/python3/dist-packages (from flask->flask-wtf) (8.1.6)
Requirement already satisfied: blinker>=1.6.2 in /usr/lib/python3/dist-packages (from flask->flask-wtf) (1.7.0)
Requirement already satisfied: markupsafe in /usr/lib/python3/dist-packages (from wtforms->flask-wtf) (2.1.5)
Requirement already satisfied: pytz>=2024.2 in /usr/local/lib/python3.12/dist-packages (from dateparser>=1.1.2->htmldate>=1.9.2->trafilatura) (2025.2)
Requirement already satisfied: regex>=2024.9.11 in /usr/local/lib/python3.12/dist-packages (from dateparser>=1.1.2->htmldate>=1.9.2->trafilatura) (2024.11.6)
Requirement already satisfied: tzlocal>=0.2 in /usr/lib/python3/dist-packages (from dateparser>=1.1.2->htmldate>=1.9.2->trafilatura) (5.2)
Requirement already satisfied: lxml_html_clean in /usr/local/lib/python3.12/dist-packages (from lxml[html_clean]>=4.4.2->justext>=3.0.1->trafilatura) (0.4.2)
Requirement already satisfied: six>=1.5 in /usr/lib/python3/dist-packages (from python-dateutil>=2.9.0.post0->htmldate>=1.9.2->trafilatura) (1.16.0)
Downloading flask_wtf-1.2.2-py3-none-any.whl (12 kB)
Downloading wtforms-3.2.1-py3-none-any.whl (152 kB)
   ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 152.5/152.5 kB 415.0 kB/s eta 0:00:00
Installing collected packages: wtforms, flask-wtf
Successfully installed flask-wtf-1.2.2 wtforms-3.2.1
WARNING: Running pip as the 'root' user can result in broken permissions and conflicting behaviour with the system package manager. It is recommended to use a virtual environment instead: https://pip.pypa.io/warnings/venv
maxx@maxx-Lenovo:~/orange-usbip$ cd ~/orange-usbip
python3 -c "from app import app; print('Import OK')"
Traceback (most recent call last):
  File "<string>", line 1, in <module>
  File "/home/maxx/orange-usbip/app.py", line 142, in <module>
    from models import User, DeviceAlias, UsbPort, LogEntry, VirtualUsbDevice, VirtualUsbPort, VirtualUsbFile, TerminalCommand
  File "/home/maxx/orange-usbip/models.py", line 7, in <module>
    class User(UserMixin, db.Model):
  File "/usr/lib/python3/dist-packages/flask_sqlalchemy/model.py", line 100, in __init__
    super().__init__(name, bases, d, **kwargs)
  File "/usr/lib/python3/dist-packages/flask_sqlalchemy/model.py", line 120, in __init__
    super().__init__(name, bases, d, **kwargs)
  File "/home/maxx/.local/lib/python3.12/site-packages/sqlalchemy/orm/decl_api.py", line 198, in __init__
    _as_declarative(reg, cls, dict_)
  File "/home/maxx/.local/lib/python3.12/site-packages/sqlalchemy/orm/decl_base.py", line 244, in _as_declarative
    return _MapperConfig.setup_mapping(registry, cls, dict_, None, {})
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/maxx/.local/lib/python3.12/site-packages/sqlalchemy/orm/decl_base.py", line 325, in setup_mapping
    return _ClassScanMapperConfig(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/maxx/.local/lib/python3.12/site-packages/sqlalchemy/orm/decl_base.py", line 518, in __init__
    super().__init__(registry, cls_, mapper_kw)
  File "/home/maxx/.local/lib/python3.12/site-packages/sqlalchemy/orm/decl_base.py", line 341, in __init__
    instrumentation.register_class(
  File "/home/maxx/.local/lib/python3.12/site-packages/sqlalchemy/orm/instrumentation.py", line 682, in register_class
    manager._update_state(
  File "/home/maxx/.local/lib/python3.12/site-packages/sqlalchemy/orm/instrumentation.py", line 207, in _update_state
    registry._add_manager(self)
  File "/home/maxx/.local/lib/python3.12/site-packages/sqlalchemy/orm/decl_api.py", line 1402, in _add_manager
    raise exc.ArgumentError(
sqlalchemy.exc.ArgumentError: Class '<class 'models.User'>' already has a primary mapper defined. 
